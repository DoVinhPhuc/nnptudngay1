<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Product List</title>

  <!-- Bootstrap 5 -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
</head>
<body>

<div class="container mt-4">
  <h2 class="text-center mb-4"> Danh sÃ¡ch sáº£n pháº©m</h2>

  <!-- TÃ¬m kiáº¿m -->
  <input
    type="text"
    id="searchInput"
    class="form-control mb-3"
    placeholder="ðŸ” TÃ¬m theo tÃªn sáº£n pháº©m..."
    oninput="searchProduct()"
  >

  <!-- Sáº¯p xáº¿p -->
  <div class="mb-3 d-flex gap-2 flex-wrap">
    <button class="btn btn-outline-primary" onclick="sortNameAsc()">TÃªn A â†’ Z</button>
    <button class="btn btn-outline-primary" onclick="sortNameDesc()">TÃªn Z â†’ A</button>
    <button class="btn btn-outline-success" onclick="sortPriceAsc()">GiÃ¡ tÄƒng</button>
    <button class="btn btn-outline-success" onclick="sortPriceDesc()">GiÃ¡ giáº£m</button>
  </div>

  <!-- Báº£ng -->
  <table class="table table-bordered table-hover align-middle text-center">
    <thead class="table-dark">
      <tr>
        <th>HÃ¬nh áº£nh</th>
        <th>TÃªn</th>
        <th>Danh má»¥c</th>
        <th>GiÃ¡</th>
        <th>MÃ´ táº£</th>
      </tr>
    </thead>
    <tbody id="productTable"></tbody>
  </table>
</div>

<script>
let products = [];
let filteredProducts = [];

fetch("db.json")
  .then(res => res.json())
  .then(data => {
    products = data;
    filteredProducts = [...products];
    renderTable(filteredProducts);
  });

// Render báº£ng
function renderTable(list) {
  const table = document.getElementById("productTable");
  table.innerHTML = "";

  list.forEach(p => {
    table.innerHTML += `
      <tr>
        <td>
          <img src="${p.images[0]}" width="100">
        </td>
        <td>${p.title}</td>
        <td>${p.category.name}</td>
        <td>$${p.price}</td>
        <td>${p.description}</td>
      </tr>
    `;
  });
}

// TÃ¬m kiáº¿m
function searchProduct() {
  const keyword = document.getElementById("searchInput").value.toLowerCase();
  filteredProducts = products.filter(p =>
    p.title.toLowerCase().includes(keyword)
  );
  renderTable(filteredProducts);
}

// Sáº¯p xáº¿p tÃªn
function sortNameAsc() {
  filteredProducts.sort((a, b) => a.title.localeCompare(b.title));
  renderTable(filteredProducts);
}

function sortNameDesc() {
  filteredProducts.sort((a, b) => b.title.localeCompare(a.title));
  renderTable(filteredProducts);
}

// Sáº¯p xáº¿p giÃ¡
function sortPriceAsc() {
  filteredProducts.sort((a, b) => a.price - b.price);
  renderTable(filteredProducts);
}

function sortPriceDesc() {
  filteredProducts.sort((a, b) => b.price - a.price);
  renderTable(filteredProducts);
}
</script>

</body>
</html>
